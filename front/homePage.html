<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conference</title>
    <style>
        html, body {
            scroll-behavior: smooth;
            overflow: hidden;
            height: 100%;
        }
        body {
            position: relative;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .site-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 20px;
            background-color: #fff;
            border-bottom: 1px solid #ccc;
        }
        .site-header .left, .site-header .right {
            display: flex;
            align-items: center;
        }
        .site-header .icon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        .site-header .site-name {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .site-header .user-info {
            font-size: 16px;
            color: #333;
            margin-right: 10px;
        }
        .site-header .login-button, .site-header .logout-button {
            background-color: #ff4d4f;
            color: #fff;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }
        .header {
            display: flex;
            background-color: #fff;
            padding: 10px 0;
            border-bottom: 1px solid #ccc;
        }
        .tab {
            cursor: pointer;
            padding: 10px 20px;
            background-color: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            margin-right: 10px;
            color: #666;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .tab.active {
            color: #ff4d4f;
            border-bottom: 2px solid #ff4d4f;
        }
        .main {
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
            height: calc(100vh - 180px);
            overflow: hidden;
        }
        .main iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .footer {
            background-color: #f1f1f1;
            text-align: center;
            padding: 10px 0;
            position: absolute;
            bottom: 0;
            width: 100%;
            border-top: 1px solid #ccc;
            font-size: 14px;
            color: #333;
        }
        .footer a {
            color: #ff4d4f;
            text-decoration: none;
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="site-header">
            <div class="left">
                <img src="static/icons/logo.ico" alt="Icon" class="icon">
                <span class="site-name">Conference Management System</span>
            </div>
            <div class="right">
                <div class="user-info" v-if="loggedIn">
                    欢迎你, {{ username }}
                </div>
                <button class="login-button" v-if="!loggedIn" @click="login">
                    登陆
                </button>
                <button class="logout-button" v-if="loggedIn" @click="logout">
                    注销
                </button>
            </div>
        </div>

        <div class="header">
            <div 
                v-for="tab in tabs" 
                :key="tab.name" 
                :class="['tab', { active: activeTab === tab.name }]" 
                @click="openTab(tab.name)"
            >
                {{ tab.label }}
            </div>
        </div>

        <div class="main">
            <iframe :src="currentSrc" id="main-frame"></iframe>
        </div>

        <div class="footer">
            &copy; 2024 Conference Management System. All rights reserved.
            <a href="/privacy">Privacy Policy</a>
            <a href="/terms">Terms of Service</a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script>
        new Vue({
            el: '#app',
            data: {
                loggedIn: false,
                username: '',
                activeTab: 'tab1',
                tabs: [
                    { name: 'tab1', label: '征稿会议', src: '/meetingsPage' },
                    { name: 'tab2', label: '征稿期刊', src: '/journalsPage' },
                    { name: 'tab3', label: '会议', src: '/twomeetingsPage' },
                    { name: 'tab4', label: '期刊', src: '/issnjournalsPage' }
                ]
            },
            computed: {
                currentSrc() {
                    const activeTab = this.tabs.find(tab => tab.name === this.activeTab);
                    return activeTab ? activeTab.src : '';
                }
            },
            methods: {
                openTab(tabName) {
                    this.activeTab = tabName;
                },
                login() {

                    window.location.href = '/login';
                },
                logout() {

                    this.loggedIn = false;
                    localStorage.removeItem('userinfo');
                    localStorage.removeItem('token');
                }
            },
            mounted() {
                const username = localStorage.getItem('username');
                console.log(localStorage.getItem('username'))
                const token = localStorage.getItem('token');
                if (username && token) {
                    this.loggedIn = true;
                    this.username = username;
                }
            }
        });
    </script>
</body>
</html>
